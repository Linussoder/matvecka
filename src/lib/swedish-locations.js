// Swedish regions (län) with their towns - comprehensive list
export const swedishRegions = {
  'Stockholm': {
    name: 'Stockholms län',
    cities: [
      'Stockholm', 'Södertälje', 'Nacka', 'Solna', 'Huddinge', 'Järfälla',
      'Täby', 'Haninge', 'Botkyrka', 'Sollentuna', 'Upplands Väsby',
      'Österåker', 'Tyresö', 'Vallentuna', 'Norrtälje', 'Sigtuna',
      'Sundbyberg', 'Lidingö', 'Danderyd', 'Ekerö', 'Värmdö', 'Nynäshamn',
      'Salem', 'Upplands-Bro', 'Nykvarn', 'Vaxholm', 'Bromma', 'Kungsholmen',
      'Södermalm', 'Östermalm', 'Vasastan', 'Hägersten', 'Skärholmen',
      'Farsta', 'Enskede', 'Älvsjö', 'Bandhagen', 'Högdalen', 'Fruängen',
      'Årsta', 'Hammarbyhöjden', 'Björkhagen', 'Bagarmossen', 'Skarpnäck',
      'Älta', 'Saltsjöbaden', 'Fisksätra', 'Orminge', 'Gustavsberg',
      'Åkersberga', 'Märsta', 'Rosersberg', 'Arlanda', 'Bro', 'Kungsängen',
      'Tumba', 'Tullinge', 'Rönninge', 'Stuvsta', 'Huddinge centrum',
      'Flemingsberg', 'Segeltorp', 'Trångsund', 'Skogås', 'Länna',
      'Jordbro', 'Brandbergen', 'Handen', 'Vendelsö', 'Nynäshamn',
      'Ösmo', 'Sorunda', 'Rimbo', 'Hallstavik', 'Bålsta', 'Upplands Bro'
    ]
  },
  'Västra Götaland': {
    name: 'Västra Götalands län',
    cities: [
      'Göteborg', 'Borås', 'Trollhättan', 'Skövde', 'Uddevalla', 'Mölndal',
      'Alingsås', 'Kungälv', 'Lerum', 'Lidköping', 'Vänersborg', 'Mariestad',
      'Falköping', 'Kungsbacka', 'Partille', 'Härryda', 'Stenungsund',
      'Strömstad', 'Åmål', 'Vara', 'Tibro', 'Tidaholm', 'Skara', 'Töreboda',
      'Majorna', 'Linné', 'Hisingen', 'Angered', 'Bergsjön', 'Kortedala',
      'Gamlestaden', 'Kålltorp', 'Örgryte', 'Härlanda', 'Bagaregården',
      'Lundby', 'Torslanda', 'Öckerö', 'Askim', 'Hovås', 'Billdal',
      'Mölnlycke', 'Landvetter', 'Hindås', 'Bollebygd', 'Borås', 'Sjömarken',
      'Fristad', 'Dalsjöfors', 'Sandared', 'Gånghester', 'Viskafors',
      'Fritsla', 'Kinna', 'Skene', 'Sätila', 'Horred', 'Lilla Edet',
      'Nol', 'Surte', 'Bohus', 'Ytterby', 'Marstrand', 'Tjörn', 'Skärhamn',
      'Orust', 'Henån', 'Ellös', 'Mollösund', 'Lysekil', 'Brastad', 'Munkedal',
      'Dingle', 'Fjällbacka', 'Grebbestad', 'Tanumshede', 'Hamburgsund',
      'Grästorp', 'Götene', 'Hjo', 'Karlsborg', 'Gullspång', 'Mariestad',
      'Nossebro', 'Herrljunga', 'Vårgårda', 'Floby', 'Stenstorp', 'Axvall'
    ]
  },
  'Skåne': {
    name: 'Skåne län',
    cities: [
      'Malmö', 'Helsingborg', 'Lund', 'Kristianstad', 'Landskrona', 'Trelleborg',
      'Ängelholm', 'Hässleholm', 'Ystad', 'Eslöv', 'Höganäs', 'Staffanstorp',
      'Lomma', 'Svedala', 'Kävlinge', 'Vellinge', 'Burlöv', 'Simrishamn',
      'Båstad', 'Klippan', 'Höör', 'Tomelilla', 'Sjöbo', 'Skurup', 'Osby',
      // Adding missing towns
      'Bjuv', 'Hyllinge', 'Mörarp', 'Ekeby', 'Billesholm', 'Åstorp',
      'Kvidinge', 'Strövelstorp', 'Munka-Ljungby', 'Örkelljunga', 'Perstorp',
      'Vinslöv', 'Tyringe', 'Hästveda', 'Vittsjö', 'Sösdala', 'Broby',
      'Knislinge', 'Sibbhult', 'Lönsboda', 'Glimåkra', 'Immeln',
      'Bromölla', 'Sölvesborg', 'Mjällby', 'Norje', 'Olofström',
      'Åhus', 'Tollarp', 'Fjälkinge', 'Önnestad', 'Degeberga', 'Everöd',
      'Kivik', 'Brösarp', 'Sankt Olof', 'Hammenhög', 'Gärsnäs', 'Borrby',
      'Svarte', 'Abbekås', 'Löderup', 'Kåseberga', 'Nybrostrand',
      'Dalby', 'Södra Sandby', 'Veberöd', 'Genarp', 'Staffanstorp',
      'Hjärup', 'Åkarp', 'Arlöv', 'Löddeköpinge', 'Furulund', 'Stångby',
      'Vallkärra', 'Dösjebro', 'Kågeröd', 'Svalöv', 'Teckomatorp', 'Billeberga',
      'Marieholm', 'Löberöd', 'Hörby', 'Ludvigsborg', 'Lyby', 'Osbyholm',
      'Hurva', 'Harlösa', 'Flyinge', 'Gårdstånga', 'Örtofta', 'Östra Ljungby',
      'Nyvång', 'Ljungbyhed', 'Röstånga', 'Billinge', 'Stehag', 'Tjörnarp',
      'Sösdala', 'Ballingslöv', 'Vinslöv', 'Önnestad', 'Oppmanna',
      'Arkelstorp', 'Färlöv', 'Nosaby', 'Hammar', 'Åsum', 'Rinkaby',
      'Kabbarp', 'Skanör', 'Falsterbo', 'Ljunghusen', 'Höllviken', 'Kämpinge',
      'Beddingestrand', 'Smygehamn', 'Anderslöv', 'Grönby', 'Östra Grevie',
      'Skegrie', 'Klagstorp', 'Alstad', 'Rydsgård', 'Näsbyholm'
    ]
  },
  'Östergötland': {
    name: 'Östergötlands län',
    cities: [
      'Linköping', 'Norrköping', 'Motala', 'Mjölby', 'Finspång', 'Vadstena',
      'Åtvidaberg', 'Söderköping', 'Boxholm', 'Kinda', 'Valdemarsvik', 'Ödeshög',
      'Skänninge', 'Mantorp', 'Vikingstad', 'Linghem', 'Ljungsbro', 'Berg',
      'Malmslätt', 'Sturefors', 'Rimforsa', 'Horn', 'Kisa', 'Österbymo',
      'Kolmården', 'Åby', 'Svärtinge', 'Krokek', 'Arkösund', 'Vikbolandet',
      'Gryt', 'Fyrby', 'Borensberg', 'Klockrike', 'Fornåsa', 'Skärblacka',
      'Kimstad', 'Norsholm', 'Gistad', 'Ringarum', 'Gusum', 'Gamleby'
    ]
  },
  'Uppsala': {
    name: 'Uppsala län',
    cities: [
      'Uppsala', 'Enköping', 'Bålsta', 'Knivsta', 'Östhammar', 'Tierp',
      'Älvkarleby', 'Heby', 'Storvreta', 'Björklinge', 'Vattholma', 'Skyttorp',
      'Almunge', 'Knutby', 'Örbyhus', 'Vendel', 'Skutskär', 'Gävle',
      'Morgongåva', 'Vittinge', 'Harbo', 'Sala', 'Skokloster', 'Sigtuna',
      'Grillby', 'Örsundsbro', 'Alunda', 'Gimo', 'Öregrund', 'Hallstavik'
    ]
  },
  'Södermanland': {
    name: 'Södermanlands län',
    cities: [
      'Eskilstuna', 'Nyköping', 'Katrineholm', 'Strängnäs', 'Flen',
      'Oxelösund', 'Trosa', 'Gnesta', 'Vingåker', 'Torshälla', 'Hällbybrunn',
      'Malmköping', 'Sparreholm', 'Björnlunda', 'Stjärnhov', 'Åkers Styckebruk',
      'Mariefred', 'Stallarholmen', 'Vagnhärad', 'Tystberga', 'Nävekvarn',
      'Stigtomta', 'Julita', 'Sköldinge', 'Floda', 'Hälleforsnäs', 'Bettna'
    ]
  },
  'Jönköping': {
    name: 'Jönköpings län',
    cities: [
      'Jönköping', 'Värnamo', 'Nässjö', 'Vetlanda', 'Tranås', 'Gislaved',
      'Eksjö', 'Sävsjö', 'Vaggeryd', 'Gnosjö', 'Habo', 'Mullsjö', 'Aneby',
      'Huskvarna', 'Norrahammar', 'Bankeryd', 'Gränna', 'Ödeshög',
      'Skillingaryd', 'Vrigstad', 'Landsbro', 'Forsheda', 'Reftele',
      'Smålandsstenar', 'Burseryd', 'Hillerstorp', 'Anderstorp', 'Hestra',
      'Bodafors', 'Malmbäck', 'Korsberga', 'Mariannelund', 'Bruzaholm',
      'Stockaryd', 'Lammhult', 'Gemla', 'Moheda', 'Lenhovda', 'Åseda'
    ]
  },
  'Kronoberg': {
    name: 'Kronobergs län',
    cities: [
      'Växjö', 'Ljungby', 'Älmhult', 'Markaryd', 'Tingsryd', 'Lessebo',
      'Alvesta', 'Uppvidinge', 'Lammhult', 'Gemla', 'Ingelstad', 'Braås',
      'Rottne', 'Hovmantorp', 'Kosta', 'Nybro', 'Orrefors', 'Emmaboda',
      'Åseda', 'Lenhovda', 'Vislanda', 'Moheda', 'Lagan', 'Ljungby',
      'Ryssby', 'Lidhult', 'Hamneda', 'Vittaryd', 'Strömsnäsbruk'
    ]
  },
  'Kalmar': {
    name: 'Kalmar län',
    cities: [
      'Kalmar', 'Västervik', 'Oskarshamn', 'Nybro', 'Vimmerby', 'Hultsfred',
      'Mörbylånga', 'Emmaboda', 'Torsås', 'Borgholm', 'Högsby', 'Mönsterås',
      'Lindsdal', 'Ljungbyholm', 'Rockneby', 'Rinkabyholm', 'Smedby',
      'Färjestaden', 'Köpingsvik', 'Löttorp', 'Byxelkrok', 'Degerhamn',
      'Gamleby', 'Ankarsrum', 'Loftahammar', 'Överum', 'Gunnebo',
      'Påskallavik', 'Fårbo', 'Kristdala', 'Figeholm', 'Misterhult',
      'Virserum', 'Mariannelund', 'Frödinge', 'Målilla', 'Storebro',
      'Silverdalen', 'Järnforsen', 'Lönneberga', 'Fagerhult', 'Orrefors'
    ]
  },
  'Gotland': {
    name: 'Gotlands län',
    cities: [
      'Visby', 'Hemse', 'Slite', 'Klintehamn', 'Roma', 'Burgsvik', 'Fårösund',
      'Lärbro', 'Tingstäde', 'Havdhem', 'Stenkumla', 'Dalhem', 'Ljugarn',
      'Katthammarsvik', 'När', 'Stånga', 'Kräklingbo', 'Lau', 'Alva'
    ]
  },
  'Blekinge': {
    name: 'Blekinge län',
    cities: [
      'Karlskrona', 'Karlshamn', 'Ronneby', 'Sölvesborg', 'Olofström',
      'Nättraby', 'Jämjö', 'Lyckeby', 'Sturkö', 'Hasslö', 'Aspö',
      'Mörrum', 'Svängsta', 'Asarum', 'Bräkne-Hoby', 'Kallinge', 'Listerby',
      'Johannishus', 'Rödeby', 'Holmsjö', 'Fridlevstad', 'Jämshög', 'Kyrkhult'
    ]
  },
  'Halland': {
    name: 'Hallands län',
    cities: [
      'Halmstad', 'Varberg', 'Falkenberg', 'Kungsbacka', 'Laholm', 'Hylte',
      'Getinge', 'Harplinge', 'Oskarström', 'Simlångsdalen', 'Åled',
      'Tvååker', 'Veddige', 'Åsa', 'Onsala', 'Vallda', 'Fjärås', 'Älvsered',
      'Torup', 'Hyltebruk', 'Unnaryd', 'Ullared', 'Vessigebro', 'Ätran',
      'Morup', 'Glommen', 'Skrea', 'Ullared', 'Vinberg', 'Skällinge',
      'Slöinge', 'Eftra', 'Stafsinge', 'Knäred', 'Vallberga', 'Våxtorp',
      'Genevad', 'Hasslöv', 'Skottorp', 'Mellbystrand', 'Båstad'
    ]
  },
  'Värmland': {
    name: 'Värmlands län',
    cities: [
      'Karlstad', 'Kristinehamn', 'Arvika', 'Säffle', 'Hagfors', 'Sunne',
      'Filipstad', 'Forshaga', 'Grums', 'Hammarö', 'Kil', 'Munkfors',
      'Storfors', 'Torsby', 'Årjäng', 'Eda', 'Skoghall', 'Deje', 'Molkom',
      'Ekshärad', 'Likenäs', 'Sysslebäck', 'Höljes', 'Charlottenberg',
      'Åmotfors', 'Töcksfors', 'Bengtsfors', 'Ed', 'Mellerud', 'Laxå',
      'Degerfors', 'Karlskoga', 'Lesjöfors', 'Persberg', 'Nykroppa',
      'Gammalkroppa', 'Geijersholm', 'Ransby', 'Fryksände', 'Fagerås'
    ]
  },
  'Örebro': {
    name: 'Örebro län',
    cities: [
      'Örebro', 'Karlskoga', 'Kumla', 'Hallsberg', 'Lindesberg', 'Nora',
      'Askersund', 'Degerfors', 'Hällefors', 'Laxå', 'Ljusnarsberg', 'Lekeberg',
      'Fjugesta', 'Pålsboda', 'Sköllersta', 'Odensbacken', 'Hovsta',
      'Vivalla', 'Brickebacken', 'Adolfsberg', 'Baronbackarna', 'Lillån',
      'Fellingsbro', 'Frövi', 'Ervalla', 'Garphyttan', 'Mullhyttan',
      'Grythyttan', 'Kopparberg', 'Storå', 'Ställdalen', 'Sikfors', 'Rockhammar'
    ]
  },
  'Västmanland': {
    name: 'Västmanlands län',
    cities: [
      'Västerås', 'Köping', 'Sala', 'Fagersta', 'Arboga', 'Hallstahammar',
      'Surahammar', 'Kungsör', 'Norberg', 'Skinnskatteberg', 'Tillberga',
      'Skultuna', 'Kolbäck', 'Strömsholm', 'Munktorp', 'Ransta', 'Heby',
      'Morgongåva', 'Vittinge', 'Östervåla', 'Harbo', 'Ängelsberg', 'Virsbo',
      'Ramnäs', 'Riddarhyttan', 'Kolsva', 'Svedvi', 'Björksta', 'Dingtuna'
    ]
  },
  'Dalarna': {
    name: 'Dalarnas län',
    cities: [
      'Falun', 'Borlänge', 'Ludvika', 'Avesta', 'Mora', 'Hedemora',
      'Leksand', 'Rättvik', 'Säter', 'Smedjebacken', 'Orsa', 'Älvdalen',
      'Gagnef', 'Vansbro', 'Malung-Sälen', 'Sälen', 'Malung', 'Mockfjärd',
      'Djurås', 'Dala-Floda', 'Bjursås', 'Enviken', 'Sundborn', 'Svärdsjö',
      'Linghed', 'Torsång', 'Ornäs', 'Vikarbyn', 'Furudal', 'Boda',
      'Grycksbo', 'Sågmyra', 'Sifferbo', 'Stjärnsund', 'Krylbo', 'Horndal',
      'Fors', 'By', 'Folkärna', 'Grängesberg', 'Sunnansjö', 'Nyhammar',
      'Fredriksberg', 'Idre', 'Särna', 'Drevdagen', 'Nås', 'Transtrand'
    ]
  },
  'Gävleborg': {
    name: 'Gävleborgs län',
    cities: [
      'Gävle', 'Sandviken', 'Hudiksvall', 'Söderhamn', 'Bollnäs', 'Ljusdal',
      'Hofors', 'Ockelbo', 'Ovanåker', 'Nordanstig', 'Valbo', 'Forsbacka',
      'Storvik', 'Årsunda', 'Hedesunda', 'Bomhus', 'Hille', 'Hamrånge',
      'Bergby', 'Norrsundet', 'Iggesund', 'Njutånger', 'Delsbo', 'Järvsö',
      'Färila', 'Los', 'Kårböle', 'Arbrå', 'Edsbyn', 'Alfta', 'Kilafors',
      'Stugsund', 'Marmaverken', 'Ljusne', 'Trönödal', 'Norrala', 'Bergvik'
    ]
  },
  'Västernorrland': {
    name: 'Västernorrlands län',
    cities: [
      'Sundsvall', 'Örnsköldsvik', 'Härnösand', 'Timrå', 'Kramfors',
      'Sollefteå', 'Ånge', 'Matfors', 'Stöde', 'Njurunda', 'Liden',
      'Indal', 'Holm', 'Söråker', 'Bergsjö', 'Stockvik', 'Sörberge',
      'Bredbyn', 'Björna', 'Sidensjö', 'Trehörningsjö', 'Nordingrå',
      'Ullånger', 'Docksta', 'Lunde', 'Sund', 'Nora', 'Bollstabruk',
      'Nyland', 'Långsele', 'Ramsele', 'Junsele', 'Näsåker', 'Resele',
      'Fränsta', 'Ljungaverk', 'Torpshammar', 'Borgsjö', 'Haverö'
    ]
  },
  'Jämtland': {
    name: 'Jämtlands län',
    cities: [
      'Östersund', 'Sveg', 'Strömsund', 'Krokom', 'Åre', 'Berg',
      'Bräcke', 'Ragunda', 'Härjedalen', 'Duved', 'Järpen', 'Mörsil',
      'Mattmar', 'Nälden', 'Hallen', 'Hammerdal', 'Gäddede', 'Frostviken',
      'Lit', 'Häggenås', 'Brunflo', 'Frösön', 'Ås', 'Tandsbyn',
      'Svenstavik', 'Hackås', 'Oviken', 'Myssjö', 'Rätan', 'Klövsjö',
      'Vemdalen', 'Hede', 'Funäsdalen', 'Ljusnedal', 'Tännäs', 'Lofsdalen',
      'Ytterhogdal', 'Lillhärdal', 'Hamra', 'Los', 'Bräcke', 'Pilgrimstad'
    ]
  },
  'Västerbotten': {
    name: 'Västerbottens län',
    cities: [
      'Umeå', 'Skellefteå', 'Lycksele', 'Vilhelmina', 'Vindeln', 'Vännäs',
      'Nordmaling', 'Robertsfors', 'Storuman', 'Sorsele', 'Dorotea',
      'Åsele', 'Malå', 'Norsjö', 'Bjurholm', 'Holmsund', 'Hörnefors',
      'Obbola', 'Sävar', 'Tavelsjö', 'Hissjö', 'Bullmark', 'Bygdeå',
      'Lövånger', 'Bureå', 'Burträsk', 'Jörn', 'Boliden', 'Kåge',
      'Ersmark', 'Medle', 'Byske', 'Fällfors', 'Bastuträsk', 'Dikanäs',
      'Tärnaby', 'Hemavan', 'Kittelfjäll', 'Fatmomakke', 'Ammarnäs',
      'Blattnicksele', 'Fredrika', 'Åskilje', 'Junsele', 'Strömsund'
    ]
  },
  'Norrbotten': {
    name: 'Norrbottens län',
    cities: [
      'Luleå', 'Piteå', 'Boden', 'Kiruna', 'Gällivare', 'Kalix', 'Haparanda',
      'Älvsbyn', 'Arvidsjaur', 'Jokkmokk', 'Överkalix', 'Övertorneå',
      'Pajala', 'Arjeplog', 'Malmberget', 'Porjus', 'Vuollerim', 'Murjek',
      'Vidsel', 'Glommersträsk', 'Moskosel', 'Slagnäs', 'Bredsel',
      'Sorsele', 'Ammarnäs', 'Storuman', 'Tärnaby', 'Hemavan',
      'Råneå', 'Niemisel', 'Morjärv', 'Töre', 'Sangis', 'Seskarö',
      'Rolfs', 'Svanstein', 'Juoksengi', 'Korpilombolo', 'Tärendö',
      'Vittangi', 'Karesuando', 'Svappavaara', 'Hakkas', 'Ullatti',
      'Jukkasjärvi', 'Abisko', 'Riksgränsen', 'Björkliden', 'Katterjåkk'
    ]
  }
}

// Popular cities (shown first)
export const popularCities = [
  'Stockholm', 'Göteborg', 'Malmö', 'Uppsala', 'Linköping',
  'Örebro', 'Västerås', 'Helsingborg', 'Norrköping', 'Jönköping',
  'Umeå', 'Lund', 'Gävle', 'Borås', 'Sundsvall'
]

// Get all cities as flat array
export function getAllCities() {
  const allCities = new Set()

  Object.values(swedishRegions).forEach(region => {
    region.cities.forEach(city => allCities.add(city))
  })

  return Array.from(allCities).sort((a, b) => a.localeCompare(b, 'sv'))
}

// Search cities
export function searchCities(query) {
  if (!query || query.length < 2) return []

  const normalizedQuery = query.toLowerCase().trim()
  const allCities = getAllCities()

  // First, find cities that START with the query
  const startsWithResults = allCities.filter(city =>
    city.toLowerCase().startsWith(normalizedQuery)
  )

  // Then, find cities that CONTAIN the query (but don't start with it)
  const containsResults = allCities.filter(city =>
    city.toLowerCase().includes(normalizedQuery) &&
    !city.toLowerCase().startsWith(normalizedQuery)
  )

  return [...startsWithResults, ...containsResults].slice(0, 20)
}

// Get region for a city
export function getRegionForCity(cityName) {
  for (const [regionKey, region] of Object.entries(swedishRegions)) {
    if (region.cities.includes(cityName)) {
      return region.name
    }
  }
  return null
}

// Get saved user location from localStorage
export function getUserLocation() {
  if (typeof window === 'undefined') return null
  return localStorage.getItem('matvecka-location')
}

// Save user location to localStorage
export function saveUserLocation(city) {
  if (typeof window === 'undefined') return
  localStorage.setItem('matvecka-location', city)
}
